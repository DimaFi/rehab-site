<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ .Title }} - {{ .Site.Title }}</title>
    <meta name="description" content="{{ .Description | default .Site.Params.description }}">
    <link rel="stylesheet" href="/css/custom.css">
    <script src="/js/slider.js" defer></script>
    <script src="https://api-maps.yandex.ru/2.1/?apikey=&lang=ru_RU" type="text/javascript"></script>
</head>
<body>
    <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
    <div class="top-bar">
        <div class="container">
            <div class="top-bar-left">
                <!-- <span class="rating">–•–æ—Ä–æ—à–µ–µ –º–µ—Å—Ç–æ 5.0</span> -->
                <span class="address">{{ .Site.Params.address }}</span>
                <!-- license hidden per request -->
            </div>
            <div class="top-bar-center">
                <span>–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –Ω–∞—Ä–∫–æ–ª–æ–≥—É. –≠—Ç–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ –∏ –∞–Ω–æ–Ω–∏–º–Ω–æ</span>
            </div>
            <div class="top-bar-right">
                <div class="phone-numbers">
                    <span>
                        <a href="tel:88003006103">{{ .Site.Params.phone1 }}</a>
                        <span class="emergency-note">üöë –ö—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ</span>
                    </span>
                    <span>
                        <a href="tel:84955324403">{{ .Site.Params.phone2 }}</a>
                        <span class="emergency-note">üöë –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –ø–æ–º–æ—â—å</span>
                    </span>
                </div>
                <a class="order-call-btn" href="#contact-social">–ó–∞–∫–∞–∑–∞—Ç—å –∑–≤–æ–Ω–æ–∫</a>
            </div>
        </div>
    </div>

    <!-- –ì–ª–∞–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="main-nav">
        <div class="container">
            <a href="/" class="logo">
                    <div class="logo-circle">
                        <img src="/images/info/logo3-2.png" alt="" />
                    </div>
                <div class="logo-text">–ù–∞—Ä–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –ö–ª–∏–Ω–∏–∫–∞ –≠–≤–æ–ª—é—Ü–∏—è</div>
            </a>
            <button class="mobile-menu-toggle" aria-label="–ú–µ–Ω—é" id="mobileMenuToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div class="nav-menu-overlay" id="navMenuOverlay"></div>
            <ul class="nav-menu" id="navMenu">
                <li class="mobile-logo-item">
                    <a href="/" class="mobile-logo-link">
                        <span>–ì–ª–∞–≤–Ω–∞—è</span>
                    </a>
                </li>
                {{ range .Site.Menus.main }}
                    {{ if eq .Identifier "zapoy" }}
                        <li><a href="{{ .URL }}" {{ if eq .URL $.RelPermalink }}class="active"{{ end }}>{{ .Name }}</a></li>
                    {{ end }}
                {{ end }}
                {{ range .Site.Menus.main }}
                    {{ if and (ne .Identifier "zapoy") (not .HasChildren) }}
                        <li><a href="{{ .URL }}" {{ if eq .URL $.RelPermalink }}class="active"{{ end }}>{{ .Name }}</a></li>
                    {{ end }}
                {{ end }}
                {{ range .Site.Menus.main }}
                    {{ if and (ne .Identifier "zapoy") (.HasChildren) }}
                        {{ $hasActiveChild := false }}
                        {{ range .Children }}
                            {{ if eq .URL $.RelPermalink }}
                                {{ $hasActiveChild = true }}
                            {{ end }}
                        {{ end }}
                        <li class="nav-item-dropdown">
                            <a href="{{ .URL }}" class="nav-link-dropdown">
                                {{ .Name }} <span class="dropdown-arrow">‚ñº</span>
                            </a>
                            <ul class="dropdown-menu">
                                {{ range .Children }}
                                <li><a href="{{ .URL }}" {{ if eq .URL $.RelPermalink }}class="active"{{ end }}>{{ .Name }}</a></li>
                                {{ end }}
                            </ul>
                        </li>
                    {{ end }}
                {{ end }}
            </ul>
        </div>
    </nav>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main>
        {{ block "main" . }}{{ end }}
    </main>

    {{ partial "footer.html" . }}
    
    <!-- –ü–ª–∞–≤–∞—é—â–∏–µ –∫–Ω–æ–ø–∫–∏ -->
    <div class="floating-buttons">
        <a href="#" class="floating-btn scroll-top-btn" id="scrollTopBtn">‚Üë</a>
    </div>
    
    <script>
        // –ü—Ä–æ–∫—Ä—É—Ç–∫–∞ –Ω–∞–≤–µ—Ä—Ö
        const scrollTopBtn = document.getElementById('scrollTopBtn');
        if (scrollTopBtn) {
            scrollTopBtn.addEventListener('click', function(e) {
                e.preventDefault();
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ –≤–Ω–∏–∑
            window.addEventListener('scroll', function() {
                if (window.pageYOffset > 300) {
                    scrollTopBtn.classList.add('show');
                } else {
                    scrollTopBtn.classList.remove('show');
                }
            });
            
            // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            if (window.pageYOffset > 300) {
                scrollTopBtn.classList.add('show');
            }
        }
        
        // –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é
        const mobileMenuToggle = document.getElementById('mobileMenuToggle');
        const navMenu = document.getElementById('navMenu');
        const navMenuOverlay = document.getElementById('navMenuOverlay');
        
        function toggleMenu() {
            const isActive = navMenu.classList.contains('active');
            navMenu.classList.toggle('active');
            mobileMenuToggle.classList.toggle('active');
            if (navMenuOverlay) {
                navMenuOverlay.classList.toggle('active');
            }
            document.body.style.overflow = !isActive ? 'hidden' : 'auto';
        }
        
        function closeMenu() {
            navMenu.classList.remove('active');
            mobileMenuToggle.classList.remove('active');
            if (navMenuOverlay) {
                navMenuOverlay.classList.remove('active');
            }
            document.body.style.overflow = 'auto';
        }
        
        if (mobileMenuToggle && navMenu) {
            mobileMenuToggle.addEventListener('click', function(e) {
                e.stopPropagation();
                toggleMenu();
            });
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ overlay
            if (navMenuOverlay) {
                navMenuOverlay.addEventListener('click', closeMenu);
            }
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Å—Å—ã–ª–∫—É (–∫—Ä–æ–º–µ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ –º–µ–Ω—é)
            const navLinks = navMenu.querySelectorAll('a:not(.nav-link-dropdown)');
            navLinks.forEach(link => {
                link.addEventListener('click', closeMenu);
            });
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
            document.addEventListener('click', function(e) {
                if (navMenu.classList.contains('active') && 
                    !navMenu.contains(e.target) && 
                    !mobileMenuToggle.contains(e.target)) {
                    closeMenu();
                }
            });
        }
        
        // –í—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é
        document.addEventListener('DOMContentLoaded', function() {
            const dropdownToggles = document.querySelectorAll('.nav-link-dropdown');
            dropdownToggles.forEach(toggle => {
                toggle.addEventListener('click', function(e) {
                    e.preventDefault();
                    const dropdown = this.nextElementSibling;
                    const isActive = this.parentElement.classList.contains('active');
                    
                    // –ó–∞–∫—Ä—ã—Ç—å –≤—Å–µ –¥—Ä—É–≥–∏–µ –≤—ã–ø–∞–¥–∞—é—â–∏–µ –º–µ–Ω—é
                    document.querySelectorAll('.nav-item-dropdown').forEach(item => {
                        if (item !== this.parentElement) {
                            item.classList.remove('active');
                        }
                    });
                    
                    // –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–∫—É—â–µ–µ –º–µ–Ω—é
                    this.parentElement.classList.toggle('active');
                });
            });
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –º–µ–Ω—é
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.nav-item-dropdown')) {
                    document.querySelectorAll('.nav-item-dropdown').forEach(item => {
                        item.classList.remove('active');
                    });
                }
            });
        });
    </script>
</body>
</html>
